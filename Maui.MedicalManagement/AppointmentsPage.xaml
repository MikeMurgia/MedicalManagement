<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Maui.MedicalManagement.AppointmentsPage"
             Title="Appointments"
             BackgroundColor="#FFFFFF"
             NavigatedTo="ContentPage_NavigatedTo">

	<Grid RowDefinitions="Auto,*,Auto" Padding="10">

		<!-- Header with Add Button -->
		<HorizontalStackLayout Grid.Row="0"
                               HorizontalOptions="End"
                               Margin="0,10">
			<Button Text="Schedule New Appointment"
                    Clicked="AddClicked"
                    BackgroundColor="#4CAF50"
                    TextColor="White"/>
		</HorizontalStackLayout>

		<!-- Appointments List -->
		<CollectionView Grid.Row="1"
                        ItemsSource="{Binding Appointments}"
                        SelectionMode="Single"
                        SelectedItem="{Binding SelectedAppointment}"
                        Margin="0,10">
			<CollectionView.ItemTemplate>
				<DataTemplate>
					<Frame Margin="5"
                           Padding="15"
                           BackgroundColor="#FFFFFF"
                           BorderColor="#BDBDBD"
                           CornerRadius="10"
                           HasShadow="True">
						<Grid RowDefinitions="Auto,Auto,Auto"
                              ColumnDefinitions="*,Auto">

							<!-- Appointment Time -->
							<HorizontalStackLayout Grid.Row="0" Grid.Column="0" Spacing="10">
								<Label Text="📅" FontSize="20"/>
								<Label Text="{Binding Model.StartTime, StringFormat='{0:MMM dd, yyyy}'}"
                                       FontAttributes="Bold"
                                       FontSize="16"
                                       TextColor="#212121"/>
								<Label Text="{Binding Model.StartTime, StringFormat='{0:HH:mm}'}"
                                       FontAttributes="Bold"
                                       FontSize="16"
                                       TextColor="#1976D2"/>
							</HorizontalStackLayout>

							<!-- Patient Info -->
							<HorizontalStackLayout Grid.Row="1" Grid.Column="0" Spacing="10">
								<Label Text="Patient:"
                                       TextColor="#757575"
                                       FontSize="14"/>
								<Label Text="{Binding Model.PatientName}"
                                       FontSize="14"
                                       FontAttributes="Bold"
                                       TextColor="#424242"/>
							</HorizontalStackLayout>

							<!-- Physician Info -->
							<HorizontalStackLayout Grid.Row="2" Grid.Column="0" Spacing="10">
								<Label Text="Physician:"
                                       TextColor="#757575"
                                       FontSize="14"/>
								<Label Text="{Binding Model.PhysicianName}"
                                       FontSize="14"
                                       FontAttributes="Bold"
                                       TextColor="#424242"/>
							</HorizontalStackLayout>

							<!-- Action Buttons -->
							<VerticalStackLayout Grid.Row="0" Grid.Column="1"
                                                Grid.RowSpan="3"
                                                Spacing="5"
                                                VerticalOptions="Center">
								<Button Text="Edit"
                                        Command="{Binding EditCommand}"
                                        CommandParameter="{Binding .}"
                                        BackgroundColor="#2196F3"
                                        TextColor="White"
                                        Padding="10,5"/>
								<Button Text="Cancel"
                                        Command="{Binding DeleteCommand}"
                                        BackgroundColor="#F44336"
                                        TextColor="White"
                                        Padding="10,5"/>
							</VerticalStackLayout>
						</Grid>
					</Frame>
				</DataTemplate>
			</CollectionView.ItemTemplate>
		</CollectionView>

		<!-- Refresh Button -->
		<Button Grid.Row="2"
                Text="Refresh"
                Clicked="RefreshClicked"
                BackgroundColor="#FF9800"
                TextColor="White"
                HorizontalOptions="Center"
                WidthRequest="150"
                Margin="0,10"/>

	</Grid>

</ContentPage>
